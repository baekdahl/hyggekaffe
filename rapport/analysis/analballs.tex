To detect the pool table and balls it is important to understand how they appear in different color spaces. In this section the colors of the table and the pool balls are measured for further analysis.

\section{The Table}
As written in the rules in section \ref{sec:rules}, the table cloth color has to be yellow-green, blue-green or electric blue. The cloth color is a constant color, but dependent on the lighting, the cloth color could have some variance.

Three different images of the pool table and one image with the cloth cut out are analysed first in HSB color space and then i RGB space. These analysis will be used in the solution chapter.

\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=0.6\textwidth]{images/hsv_hist_table}
\end{center}
\caption{HSB Images 1, 2 and 3 are the table in different light where 4 is the cutout of the cloth from image 1. All axis are aligned.}
\label{fig:tablehsv}
\end{figure} 

From the HSB color space figure \ref{fig:tablehsv} it is clear that the cloth should be somewhat easily detected using hue for the fist two images. The separation of rail and cloth is not as significant in the third image. This is because of the different illumination, which is very dark. In section \ref{sec:camera} different camera settings and illuminations are discussed which indicates that the third image is less illuminated than should be for this project.
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=0.6\textwidth]{images/rgb_hist_table}
\end{center}
\caption{RGB Images 1, 2 and 3 are the table in different light where 4 is the cutout of the cloth from image 1. All axis are aligned.}
\label{fig:tablergb}
\end{figure}
When looking at the RGB color space in figure \ref{fig:tablergb} the identification of the cloth becomes more difficult. 
As presumed, it is easier to identify the cloth in the hue-space in figure \ref{fig:tablehsv} than in either of the RGB color space components in figure \ref{fig:tablergb}. This is because of the hue ability to be, in theory, brightness invariant.

\section{The Balls}
\label{sec:analballs}
The success of the system depends on the identifiers ability to separate the pool balls from each other. To analyze the separability, histograms of all the different solid colored balls have been computed. This is done in hue-saturation space, to see if it is possible to be independent of brightness. If the system is independent of brightness, it will be more resistant towards changes in light. The histograms are arranged pairwise together in the same figure, based on color similarity, to visualize how the colors can be separated.

\input{analysis/ballhists}

\subsection{Ball Color Composition}
To be able to detect whether or not a ball is solid or striped it is important to know how big a portion of a ball is white. The images used can be seen in figure \ref{fig:ballscompo} which is based on the balls used in this project.

\begin{figure}[htpb]
\centering
\subfloat[Solid ball with number turned up.]
{
	\includegraphics[width=0.2\textwidth]{images/fy.png}
}
\quad
\subfloat[Striped ball with minimum white.]
{
	\includegraphics[width=0.2\textwidth]{images/fymax.png}
}
\quad
\subfloat[Striped ball with maximum white.]
{
	\includegraphics[width=0.2	\textwidth]{images/fymin.png}
}

\caption{Ball color compositions.}
\label{fig:ballscompo}
\end{figure}

In table \ref{fig:ballscompotable} the percentage of white pixels can be seen.

\begin{table}[htpb]
\centering
\begin{tabular}{|c|c|c|c|}
	\hline Figure & a) & b) & c) \\ 
	\hline Color & 583217 & 548839 & 175858 \\ 
	\hline White & 137359 & 173401 & 542900 \\ 
	\hline Percentage & 19.0\% & 24.0\% & 75.5\% \\ 
	\hline
\end{tabular}
\caption{Table with ball color composition.}
\label{fig:ballscompotable}
\end{table}
